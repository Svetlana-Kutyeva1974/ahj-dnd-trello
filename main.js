(()=>{"use strict";var e={977:(e,t,n)=>{e.exports=n.p+"asserts/license.txt"}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,n),l.exports}n.p="",(()=>{new class{constructor(e){this.parentEl=e,this.storage={}}static get markup(){return'\n    <div class="board">\n      <div id= "1" class="desk desk-1">\n        <div class="desk-title">\n          <span> To Do </span>\n        </div>\n        <div class="desk-body drop-area" data-id="drop-area">\n        </div>\n        <div class="desk-link">\n          <a  href="#" id = "teg" class="teg-link" onmousedown="return false">+ Add another card</a>\n          <form data-widget="form-widget" class="flex" style = "display: none">\n              <div class="form-control">\n              <textarea id="form-input" data-id="form-input" type="text" minlength="1" maxlength="100"\n              placeholder = "Enter title for this card..."></textarea>\n              </div>\n              <div class="buttons">\n                <button class = "button" data-id="form-submit">Add card</button>\n                <a  href="#" id = "close" class="close-link">&#10006;</a>\n              </div>\n          </form>\n        </div>\n      </div>\n\n      <div id= "2" class="desk desk-2">\n        <div class="desk-title">\n          <span> To Procesing </span>\n        </div>\n        <div class="desk-body drop-area" data-id="drop-area">\n        </div>\n        <div class="desk-link">\n          <a  href="#" id = "teg" class="teg-link" onmousedown="return false">+ Add another card</a>\n          <form data-widget="form-widget" class="flex" style = "display: none">\n              <div class="form-control">\n                <textarea id="form-input" data-id="form-input" type="text" minlength="1" maxlength="100"\n                placeholder = "Enter title for this card..."></textarea>\n              </div>\n              <div class="buttons">\n                <button class = "button" data-id="form-submit">Add card</button>\n                <a  href="#" id = "close" class="close-link">&#10006;</a>\n              </div>\n          </form>\n        </div>\n      </div>\n\n      <div id= "3" class="desk desk-3">\n        <div class="desk-title">\n          <span> To Finish </span>\n        </div>\n        <div class="desk-body drop-area" data-id="drop-area">\n        </div>\n        <div class="desk-link">\n          <a  href="#" id = "teg" class="teg-link" draggable ="false">+ Add another card</a>\n          <form data-widget="form-widget" class="flex" style = "display: none">\n            <div class="form-control">\n              <textarea id="form-input" data-id="form-input" type="text" minlength="1" maxlength="100"\n              placeholder = "Enter title for this card..."></textarea>\n            </div>\n            <div class="buttons">\n              <button class = "button" data-id="form-submit">Add card</button>\n              <a  href="#" id = "close" class="close-link">&#10006;</a>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    '}static get markupForm(){return'\n    <form data-widget="form-widget" class="flex">\n      <div class="form-control">\n        <input id="form-input" data-id="form-input" type="text" minlength="13" maxlength="19">\n      </div>\n      <button class = "button" data-id="form-submit">Проверить</button>\n    </form>\n    '}static get inputSelector(){return"[data-id=form-input]"}static get buttonSelector(){return"[data-id=button-widjet]"}static get widjetSelector(){return"[data-widget=button-widget]"}init(e){null===localStorage.getItem("trello")?this.storage=e:this.storage=JSON.parse(localStorage.getItem("trello"))}cardDelete(){const e=Array.from(document.querySelectorAll(".div-body"));console.log("cards i this",this,e);for(const t of e)t.onmouseenter=function(e){e.preventDefault(),e.target.classList.contains("div-body")&&e.target.children[1].classList.contains("visible")&&(e.target.children[1].classList.remove("visible"),t.children[1].addEventListener("click",(n=>{n.preventDefault(),console.log("===========",e.target.children[1],t.children[1]),n.target.closest(".div-body").remove()}))),t.addEventListener("mousedown",(n=>{if(n.target.classList.contains("task__remove"))return;n.preventDefault();let s=null,o=null,l=n.target.closest(".div-body");console.log("===========",e.target,l),e.target.classList.contains("div-body")&&(n.target.closest(".div-body").classList.contains("div-body")&&(l.style.cursor="grabbing",s=l,console.log("тянем это",s),o=l.cloneNode(!0),o.classList.add("dragged"),document.body.appendChild(o),o.style.position="absolute",o.style.zIndex=1e3,o.style.width=`${l.offsetWidth}px`,o.style.left=n.pageX-o.offsetWidth/2+"px",o.style.top=n.pageY-o.offsetHeight/2+"px",o.style.backgroundColor="green",o.style.opacity=.6,console.log("скопировали это",o)),t.closest(".board").addEventListener("mousemove",(e=>{e.preventDefault(),s&&(o.style.left=e.pageX-o.offsetWidth/2+"px",o.style.top=e.pageY-o.offsetHeight/2+"px")})),t.closest(".board").addEventListener("mouseup",(e=>{if(!s)return;const t=document.elementFromPoint(e.clientX,e.clientY),n=t.closest(".div-body"),l=t.closest(".desk");console.log("кидаем это на e.currentTarget",o,s,"\n etarget",e.target,"\n closest",t,"\n carrenttag",e.currentTarget),console.log("childrene.currentTarget",e.currentTarget.children),console.log("parent",l),console.log("parent",n);const{top:i}=t.getBoundingClientRect();e.pageY>window.scrollY+i+t.offsetHeight/2?l.children[1].appendChild(s,t.nextElementSibling):l.children[1].appendChild(s,t),document.body.removeChild(o),o=null,s=null})))}))},t.onmouseleave=function(e){e.preventDefault(),e.target.classList.contains("div-body")&&!e.target.children[1].classList.contains("visible")&&e.target.children[1].classList.add("visible")}}bindToDOM(){this.parentEl.innerHTML=this.constructor.markup;const e=Array.from(document.querySelectorAll(".teg-link"));console.log("arrlink i this",this,e);for(const t of e)t.onclick=function(){console.log("link i this",this,t),t.style.display="none",t.nextElementSibling.style.display="block"};const t=Array.from(document.querySelectorAll(".button"));console.log("arrlink i this",this,t);for(const e of t)e.addEventListener("click",(e=>this.onClick(e)));const n=Array.from(document.querySelectorAll(".close-link"));console.log("arrlink i this",this,n);for(const e of n)e.onclick=function(){console.log("link i this",this,e),e.closest(".desk-link").children[0].style.display="block",e.closest(".flex").style.display="none"}}onClick(e){e.preventDefault();const t=e.target.closest("div.desk").children;if(t[2].children[1][0].value){const n=document.createElement("div"),s=document.createElement("a"),o=document.createElement("span");s.href="#",s.innerHTML="&#10006;",s.classList.add("task__remove","visible"),n.classList.add("div-body"),o.classList.add("texts"),o.innerHTML=t[2].children[1][0].value,n.draggable="true",console.log("arrlink i this",this,t,"\n",e.target,"\n",n,"\n",o),t[1].insertAdjacentElement("afterBegin",n),n.insertAdjacentElement("beforeEnd",s),n.insertAdjacentElement("afterBegin",o),e.target.closest(".desk-link").children[1].style.display="none",e.target.closest(".desk-link").children[0].style.display="block",e.target.closest(".buttons").previousElementSibling.children[0].value="",this.cardDelete()}}onDrag(e){const t=Array.from(document.querySelectorAll(".desk-body")),n=Array.from(document.querySelectorAll(".div-body"));console.log("cards i desks this drog!!!-------",this,n,"\n",t,e);let s=null,o=null;const l=e.target;console.log("desk drog!!!-------",l),l.addEventListener("dragstart",(e=>{e.preventDefault(),e.target.classList.add("selected"),console.log("selected-------",this,e.target,e.carrentTarget,"\n"),s=l})),l.addEventListener("dragend",(e=>{e.preventDefault(),e.target.classList.remove("selected")})),l.addEventListener("mousedown",(e=>{e.preventDefault(),e.target.classList.contains("div-body")&&e.target.classList.contains("div-body")&&(e.target.style.cursor="grabbing",s=e.target,console.log("тянем это",s),o=e.target.cloneNode(!0),o.classList.add("dragged"),document.body.appendChild(o),o.style.position="absolute",o.style.zIndex=1e3,o.style.left=e.pageX-o.offsetWidth/2+"px",o.style.top=e.pageY-o.offsetHeight/2+"px",console.log("скопировали это",o))})),l.addEventListener("mousemove",(e=>{e.preventDefault(),s&&(o.style.left=e.pageX-o.offsetWidth/2+"px",o.style.top=e.pageY-o.offsetHeight/2+"px")})),l.addEventListener("mouseleave",(e=>{console.log(e),s&&(document.body.removeChild(o),o=null,s=null)})),l.addEventListener("mouseup",(e=>{if(!s)return;const t=document.elementFromPoint(e.clientX,e.clientY),{top:n}=t.getBoundingClientRect();e.pageY>window.scrollY+n+t.offsetHeight/2?e.currentTarget.insertBefore(s,t.nextElementSibling):e.currentTarget.insertBefore(s,t),document.body.removeChild(o),o=null,s=null})),l.addEventListener("dragover",(e=>{e.preventDefault()}),{capture:!0}),l.addEventListener("drop",(function(e){e.preventDefault(),this.append(s)}))}}(document.querySelector("#trello-container")).bindToDOM();n(977)})()})();